# android-test-cocktail-bar
## Что сделано
* Экран со списком. Работает режим пустого списка и заполненного. Поскольку остальная функциональность не реализована, кнопка "добавить коктейль" используется для загрузки захардкоженного списка в базу данных.  Кнопка срабатывает не с первого раза. Возможно это только у меня. Для очистки базы необходимо удалять данные приложения или само приложение. 
* Скриншоты экрана.

<table>
<tr>
<th> <img src="https://user-images.githubusercontent.com/59739589/259238892-07743919-71d5-4ece-88bb-869c4775b5e5.jpg" alt="drawing" width="400"/> </th>
<th> <img src="https://user-images.githubusercontent.com/59739589/259238938-b57faa3c-1d6b-4a50-95a6-77fe1a2cc956.jpg" alt="drawing" width="400"/> </th>
</tr>
</table>

## Технологии
Для хранения используется Room. Для загрузки изображений - Glide. Для View используется паттерн MVVM с SharedFlow.

При запуске прилжения фрагмент инициализирует вьюмодель. Вьюмодель отправляет событие "загрузка" во фрагмент и загружает данные из БД. По окончании вьюмодель отсылает событие cо списком. Ошибки не обрабатываются. Фрагмент показывает прогресс бар на время загрузки и экран со списком или с приглашением добавить коктейль в зависимости от того, пустой ли список. Фрагмент может "добавить" коктейли в БД по нажатию FAB. Вьюмодель через события вызывает у фрагмента включение и выключение прогресс бара. По окончанию добавления коктейлей, фрагмент вызывает у вьюмодели загрузку обновленного списка.

Я использовал в проекте дженерик адаптер для RecyclerView, который позволяет передавать в него любые дата классы, имеющие тип первого поля - Long. Метод, в котором байндятся вью, находится во фрагменте, в котором создается адаптер, и передается ему в качестве аргумента. Это, наверное, немного грязненько с точки зрения разделения ответсвенности, но, зато, очень удобно. Во-первых, меньше бойлерплейта, т.к. адаптер один на все приложение, во-вторых, из метода для байндинга у нас есть доступ к вызывающему фрагменту и отпадает необходимость пробрасывать какие-то данные из фрагмента в адаптер (например, высоту статусбара) и делать колбэки обратно. Мне оно очень нравится, но хотелось бы узнать Ваше мнение.
